{"ast":null,"code":"import { MONTHS } from '../utils/constants';\nexport const generateDeepInsights = (requests, tracking, slaMetrics) => {\n  const insights = [];\n\n  // Seasonal Pattern Detection\n  const monthlyData = {};\n  requests.forEach(req => {\n    const month = new Date(req.created_date).getMonth();\n    monthlyData[month] = (monthlyData[month] || 0) + 1;\n  });\n  const peakMonth = Object.entries(monthlyData).sort((a, b) => b[1] - a[1])[0];\n  if (peakMonth) {\n    insights.push({\n      type: 'seasonal',\n      severity: 'info',\n      title: 'Seasonal Pattern Detected',\n      description: `Request volume peaks in ${MONTHS[peakMonth[0]]} with ${peakMonth[1]} requests. Consider increasing staffing during this period.`,\n      impact: 'Medium',\n      actions: ['Analyze staffing levels during peak periods', 'Consider temporary resource allocation', 'Review historical data for multi-year patterns']\n    });\n  }\n\n  // Bottleneck Detection\n  const slowTypes = Object.entries(slaMetrics.byType || {}).filter(([_, data]) => parseFloat(data.avgResolutionDays) > parseFloat(data.expectedDays) * 1.5).slice(0, 3);\n  if (slowTypes.length > 0) {\n    insights.push({\n      type: 'bottleneck',\n      severity: 'warning',\n      title: 'Performance Bottleneck Identified',\n      description: `${slowTypes[0][0]} requests are taking ${slowTypes[0][1].avgResolutionDays} days on average, ${((slowTypes[0][1].avgResolutionDays / slowTypes[0][1].expectedDays - 1) * 100).toFixed(0)}% over target.`,\n      impact: 'High',\n      actions: ['Conduct process mapping workshop', 'Interview staff handling these requests', 'Identify resource constraints or policy issues']\n    });\n  }\n\n  // Geographic Clustering\n  const districtData = {};\n  requests.forEach(req => {\n    const district = req.council_district || 'Unknown';\n    districtData[district] = (districtData[district] || 0) + 1;\n  });\n  const topDistrict = Object.entries(districtData).sort((a, b) => b[1] - a[1])[0];\n  if (topDistrict) {\n    insights.push({\n      type: 'geographic',\n      severity: 'info',\n      title: 'Geographic Hotspot',\n      description: `${topDistrict[0]} accounts for ${(topDistrict[1] / requests.length * 100).toFixed(1)}% of all requests.`,\n      impact: 'Medium',\n      actions: ['Schedule community meeting in affected area', 'Deploy mobile service unit if available', 'Investigate underlying infrastructure issues']\n    });\n  }\n\n  // Predictive Backlog Alert\n  const avgDailyNew = requests.filter(r => {\n    const days = (new Date() - new Date(r.created_date)) / (1000 * 60 * 60 * 24);\n    return days <= 30;\n  }).length / 30;\n  const avgDailyClosed = requests.filter(r => {\n    if (!r.closed_date) return false;\n    const days = (new Date() - new Date(r.closed_date)) / (1000 * 60 * 60 * 24);\n    return days <= 30;\n  }).length / 30;\n  if (avgDailyNew > avgDailyClosed) {\n    insights.push({\n      type: 'predictive',\n      severity: 'critical',\n      title: 'Backlog Growth Predicted',\n      description: `Current trend shows ${avgDailyNew.toFixed(1)} new requests/day vs ${avgDailyClosed.toFixed(1)} closures/day. Backlog will grow by ${((avgDailyNew - avgDailyClosed) * 30).toFixed(0)} requests in 30 days.`,\n      impact: 'Critical',\n      actions: ['Implement expedited closure process', 'Increase team capacity temporarily', 'Review prioritization criteria']\n    });\n  }\n\n  // SLA Compliance Trend\n  const recentCompliance = requests.filter(r => r.closed_date && r.sla_met !== null).slice(0, 50).filter(r => r.sla_met).length;\n  const complianceRate = recentCompliance / 50 * 100;\n  if (complianceRate < 70) {\n    insights.push({\n      type: 'sla',\n      severity: 'critical',\n      title: 'SLA Compliance Below Target',\n      description: `Recent SLA compliance is ${complianceRate.toFixed(0)}%, below the 80% target.`,\n      impact: 'Critical',\n      actions: ['Emergency review of open requests', 'Reassess SLA targets for feasibility', 'Implement daily stand-up meetings']\n    });\n  }\n  return insights;\n};","map":{"version":3,"names":["MONTHS","generateDeepInsights","requests","tracking","slaMetrics","insights","monthlyData","forEach","req","month","Date","created_date","getMonth","peakMonth","Object","entries","sort","a","b","push","type","severity","title","description","impact","actions","slowTypes","byType","filter","_","data","parseFloat","avgResolutionDays","expectedDays","slice","length","toFixed","districtData","district","council_district","topDistrict","avgDailyNew","r","days","avgDailyClosed","closed_date","recentCompliance","sla_met","complianceRate"],"sources":["/Users/richapadhariya/Documents/pact-athon-winner/src/services/insightsEngine.js"],"sourcesContent":["import { MONTHS } from '../utils/constants';\n\nexport const generateDeepInsights = (requests, tracking, slaMetrics) => {\n  const insights = [];\n\n  // Seasonal Pattern Detection\n  const monthlyData = {};\n  requests.forEach(req => {\n    const month = new Date(req.created_date).getMonth();\n    monthlyData[month] = (monthlyData[month] || 0) + 1;\n  });\n  const peakMonth = Object.entries(monthlyData).sort((a, b) => b[1] - a[1])[0];\n  if (peakMonth) {\n    insights.push({\n      type: 'seasonal',\n      severity: 'info',\n      title: 'Seasonal Pattern Detected',\n      description: `Request volume peaks in ${MONTHS[peakMonth[0]]} with ${peakMonth[1]} requests. Consider increasing staffing during this period.`,\n      impact: 'Medium',\n      actions: [\n        'Analyze staffing levels during peak periods',\n        'Consider temporary resource allocation',\n        'Review historical data for multi-year patterns'\n      ]\n    });\n  }\n\n  // Bottleneck Detection\n  const slowTypes = Object.entries(slaMetrics.byType || {})\n    .filter(([_, data]) => parseFloat(data.avgResolutionDays) > parseFloat(data.expectedDays) * 1.5)\n    .slice(0, 3);\n  \n  if (slowTypes.length > 0) {\n    insights.push({\n      type: 'bottleneck',\n      severity: 'warning',\n      title: 'Performance Bottleneck Identified',\n      description: `${slowTypes[0][0]} requests are taking ${slowTypes[0][1].avgResolutionDays} days on average, ${((slowTypes[0][1].avgResolutionDays / slowTypes[0][1].expectedDays - 1) * 100).toFixed(0)}% over target.`,\n      impact: 'High',\n      actions: [\n        'Conduct process mapping workshop',\n        'Interview staff handling these requests',\n        'Identify resource constraints or policy issues'\n      ]\n    });\n  }\n\n  // Geographic Clustering\n  const districtData = {};\n  requests.forEach(req => {\n    const district = req.council_district || 'Unknown';\n    districtData[district] = (districtData[district] || 0) + 1;\n  });\n  const topDistrict = Object.entries(districtData).sort((a, b) => b[1] - a[1])[0];\n  if (topDistrict) {\n    insights.push({\n      type: 'geographic',\n      severity: 'info',\n      title: 'Geographic Hotspot',\n      description: `${topDistrict[0]} accounts for ${((topDistrict[1] / requests.length) * 100).toFixed(1)}% of all requests.`,\n      impact: 'Medium',\n      actions: [\n        'Schedule community meeting in affected area',\n        'Deploy mobile service unit if available',\n        'Investigate underlying infrastructure issues'\n      ]\n    });\n  }\n\n  // Predictive Backlog Alert\n  const avgDailyNew = requests.filter(r => {\n    const days = (new Date() - new Date(r.created_date)) / (1000 * 60 * 60 * 24);\n    return days <= 30;\n  }).length / 30;\n  \n  const avgDailyClosed = requests.filter(r => {\n    if (!r.closed_date) return false;\n    const days = (new Date() - new Date(r.closed_date)) / (1000 * 60 * 60 * 24);\n    return days <= 30;\n  }).length / 30;\n\n  if (avgDailyNew > avgDailyClosed) {\n    insights.push({\n      type: 'predictive',\n      severity: 'critical',\n      title: 'Backlog Growth Predicted',\n      description: `Current trend shows ${avgDailyNew.toFixed(1)} new requests/day vs ${avgDailyClosed.toFixed(1)} closures/day. Backlog will grow by ${((avgDailyNew - avgDailyClosed) * 30).toFixed(0)} requests in 30 days.`,\n      impact: 'Critical',\n      actions: [\n        'Implement expedited closure process',\n        'Increase team capacity temporarily',\n        'Review prioritization criteria'\n      ]\n    });\n  }\n\n  // SLA Compliance Trend\n  const recentCompliance = requests\n    .filter(r => r.closed_date && r.sla_met !== null)\n    .slice(0, 50)\n    .filter(r => r.sla_met).length;\n  const complianceRate = (recentCompliance / 50) * 100;\n  \n  if (complianceRate < 70) {\n    insights.push({\n      type: 'sla',\n      severity: 'critical',\n      title: 'SLA Compliance Below Target',\n      description: `Recent SLA compliance is ${complianceRate.toFixed(0)}%, below the 80% target.`,\n      impact: 'Critical',\n      actions: [\n        'Emergency review of open requests',\n        'Reassess SLA targets for feasibility',\n        'Implement daily stand-up meetings'\n      ]\n    });\n  }\n\n  return insights;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}