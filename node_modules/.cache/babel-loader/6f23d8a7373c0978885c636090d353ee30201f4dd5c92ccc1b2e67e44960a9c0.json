{"ast":null,"code":"// src/services/dataService.js\n// Optimized for Seattle Customer Service Requests API\n// Dataset: https://data.seattle.gov/City-Administration/Customer-Service-Requests/5ngg-rpne\n\nconst API_CONFIG = {\n  BASE_URL: 'https://data.seattle.gov/resource',\n  ENDPOINTS: {\n    CUSTOMER_SERVICE_REQUESTS: '5ngg-rpne.json',\n    REQUEST_TRACKING: '43nw-pkdq.json'\n  },\n  LIMITS: {\n    REQUESTS: 5000,\n    // Reasonable limit for performance\n    TRACKING: 2000\n  }\n};\n\n// Actual field names from Seattle Open Data Portal\nconst FIELD_MAPPING = {\n  // Service Request fields\n  serviceRequestNumber: 'servicerequestnumber',\n  serviceRequestType: 'webintakeservicerequests',\n  department: 'departmentname',\n  createdDate: 'createddate',\n  methodReceived: 'methodreceivedname',\n  status: 'servicerequeststatusname',\n  location: 'location',\n  xValue: 'x_value',\n  yValue: 'y_value',\n  latitude: 'latitude',\n  longitude: 'longitude',\n  latLong: 'latitude_longitude',\n  zipCode: 'zipcode',\n  councilDistrict: 'councildistrict',\n  policePrecinct: 'policeprecinct',\n  neighborhood: 'neighborhood'\n};\nexport const fetchSeattleData = async () => {\n  try {\n    console.log('ðŸ”„ Fetching data from Seattle Open Data Portal...');\n    console.log('ðŸ“Š Dataset: Customer Service Requests (5ngg-rpne)');\n\n    // Build API URLs with filters for recent data\n    const currentYear = new Date().getFullYear();\n    const threeYearsAgo = currentYear - 3;\n    const requestsUrl = `${API_CONFIG.BASE_URL}/${API_CONFIG.ENDPOINTS.CUSTOMER_SERVICE_REQUESTS}?$limit=${API_CONFIG.LIMITS.REQUESTS}&$where=createddate >= '${threeYearsAgo}-01-01T00:00:00.000'`;\n    const trackingUrl = `${API_CONFIG.BASE_URL}/${API_CONFIG.ENDPOINTS.REQUEST_TRACKING}?$limit=${API_CONFIG.LIMITS.TRACKING}`;\n    console.log('ðŸ“¡ Fetching recent requests (last 3 years)...');\n    const fetchWithTimeout = (url, timeout = 20000) => {\n      return Promise.race([fetch(url, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'X-App-Token': '' // Optional: Add your app token for higher rate limits\n        }\n      }), new Promise((_, reject) => setTimeout(() => reject(new Error('Request timeout')), timeout))]);\n    };\n    const [requestsResponse, trackingResponse] = await Promise.all([fetchWithTimeout(requestsUrl).catch(err => {\n      console.error('âŒ Error fetching requests:', err.message);\n      return null;\n    }), fetchWithTimeout(trackingUrl).catch(err => {\n      console.warn('âš ï¸ Error fetching tracking:', err.message);\n      return null;\n    })]);\n    let requests = [];\n    let tracking = [];\n    let dataFetched = false;\n\n    // Process Customer Service Requests\n    if (requestsResponse && requestsResponse.ok) {\n      try {\n        const rawRequests = await requestsResponse.json();\n        console.log(`âœ… Fetched ${rawRequests.length} requests from Seattle API`);\n        if (rawRequests && Array.isArray(rawRequests) && rawRequests.length > 0) {\n          // Process and normalize the data\n          requests = rawRequests.map(req => {\n            const createdDate = req[FIELD_MAPPING.createdDate] || req.created_date || new Date().toISOString();\n            const status = normalizeStatus(req[FIELD_MAPPING.status] || req.status);\n            const requestType = req[FIELD_MAPPING.serviceRequestType] || req.service_request_type || 'Unknown';\n\n            // Calculate closed date based on status\n            let closedDate = null;\n            if (status === 'Closed') {\n              // Estimate closed date (actual closed date might not be in dataset)\n              const created = new Date(createdDate);\n              const estimatedDays = getExpectedResolutionDays(requestType);\n              closedDate = new Date(created.getTime() + estimatedDays * 24 * 60 * 60 * 1000).toISOString();\n            }\n            return {\n              service_request_number: req[FIELD_MAPPING.serviceRequestNumber] || req.service_request_number || `SR-${Math.random().toString(36).substr(2, 9)}`,\n              service_request_type: requestType,\n              city_department: req[FIELD_MAPPING.department] || req.city_department || 'Unknown Department',\n              status: status,\n              created_date: createdDate,\n              closed_date: closedDate,\n              method_received: req[FIELD_MAPPING.methodReceived] || 'Unknown',\n              location: req[FIELD_MAPPING.location] || 'Seattle, WA',\n              council_district: req[FIELD_MAPPING.councilDistrict] || 'Unknown',\n              neighborhood: req[FIELD_MAPPING.neighborhood] || 'Unknown',\n              zip_code: req[FIELD_MAPPING.zipCode] || null,\n              latitude: parseFloat(req[FIELD_MAPPING.latitude]) || null,\n              longitude: parseFloat(req[FIELD_MAPPING.longitude]) || null,\n              police_precinct: req[FIELD_MAPPING.policePrecinct] || null,\n              expected_resolution_days: getExpectedResolutionDays(requestType),\n              actual_resolution_days: null,\n              sla_met: null\n            };\n          });\n\n          // Calculate resolution times for closed requests\n          requests = requests.map(req => {\n            if (req.closed_date && req.created_date) {\n              try {\n                const created = new Date(req.created_date);\n                const closed = new Date(req.closed_date);\n                const days = Math.floor((closed - created) / (1000 * 60 * 60 * 24));\n                return {\n                  ...req,\n                  actual_resolution_days: days >= 0 ? days : null,\n                  sla_met: days >= 0 ? days <= req.expected_resolution_days : null\n                };\n              } catch (e) {\n                return req;\n              }\n            }\n            return req;\n          });\n\n          // Sort by created_date (most recent first)\n          requests.sort((a, b) => {\n            try {\n              return new Date(b.created_date) - new Date(a.created_date);\n            } catch {\n              return 0;\n            }\n          });\n          dataFetched = true;\n          console.log(`âœ… Processed ${requests.length} requests`);\n\n          // Show statistics\n          const stats = {\n            total: requests.length,\n            open: requests.filter(r => r.status === 'Open').length,\n            inProgress: requests.filter(r => r.status === 'In Progress').length,\n            closed: requests.filter(r => r.status === 'Closed').length,\n            departments: [...new Set(requests.map(r => r.city_department))].length,\n            requestTypes: [...new Set(requests.map(r => r.service_request_type))].length\n          };\n          console.log('ðŸ“Š Dataset Statistics:', stats);\n\n          // Show date range\n          if (requests.length > 0) {\n            try {\n              const newest = new Date(requests[0].created_date);\n              const oldest = new Date(requests[requests.length - 1].created_date);\n              console.log(`ðŸ“… Date range: ${oldest.toLocaleDateString()} to ${newest.toLocaleDateString()}`);\n            } catch (e) {\n              console.log('ðŸ“… Date range calculation skipped');\n            }\n          }\n        }\n      } catch (parseError) {\n        console.error('âŒ Error processing requests:', parseError);\n        console.error('Error details:', parseError.message);\n      }\n    }\n\n    // Process Request Tracking Data\n    if (trackingResponse && trackingResponse.ok) {\n      try {\n        const rawTracking = await trackingResponse.json();\n        if (rawTracking && Array.isArray(rawTracking) && rawTracking.length > 0) {\n          console.log(`âœ… Fetched ${rawTracking.length} tracking records`);\n          tracking = rawTracking.map(track => ({\n            service_request_number: track.service_request_number || track.servicerequestnumber || '',\n            status: track.status || track.statusdescription || 'In Progress',\n            updated_at: track.updated_at || track.updatedat || new Date().toISOString(),\n            department: track.department || track.departmentname || 'Unknown'\n          }));\n          tracking.sort((a, b) => {\n            try {\n              return new Date(b.updated_at) - new Date(a.updated_at);\n            } catch {\n              return 0;\n            }\n          });\n        }\n      } catch (parseError) {\n        console.warn('âš ï¸ Error parsing tracking data:', parseError.message);\n      }\n    }\n\n    // Return live data if successful\n    if (dataFetched && requests.length > 0) {\n      var _requests, _requests$;\n      console.log(`âœ…âœ…âœ… SUCCESS! Returning ${requests.length} live records`);\n      return {\n        requests,\n        tracking,\n        error: null,\n        dataSource: 'Seattle Open Data Portal (Live)',\n        datasetUrl: 'https://data.seattle.gov/City-Administration/Customer-Service-Requests/5ngg-rpne',\n        timestamp: new Date().toISOString(),\n        stats: {\n          totalRequests: requests.length,\n          totalTracking: tracking.length,\n          dateRange: {\n            from: (_requests = requests[requests.length - 1]) === null || _requests === void 0 ? void 0 : _requests.created_date,\n            to: (_requests$ = requests[0]) === null || _requests$ === void 0 ? void 0 : _requests$.created_date\n          }\n        }\n      };\n    }\n    throw new Error(`No data available. API returned ${requests.length} records.`);\n  } catch (err) {\n    console.warn('âš ï¸ API Error, using sample data:', err.message);\n    const sampleData = generateEnhancedSampleData();\n    return {\n      ...sampleData,\n      error: `API unavailable: ${err.message}`,\n      dataSource: 'Sample Data (Demo)',\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n\n// Normalize status values from the API\nconst normalizeStatus = status => {\n  if (!status) return 'Open';\n  const statusLower = status.toLowerCase();\n  if (statusLower.includes('closed') || statusLower.includes('complete') || statusLower.includes('resolved')) {\n    return 'Closed';\n  }\n  if (statusLower.includes('progress') || statusLower.includes('assigned') || statusLower.includes('routed')) {\n    return 'In Progress';\n  }\n  if (statusLower.includes('open') || statusLower.includes('reported') || statusLower.includes('received')) {\n    return 'Open';\n  }\n  return 'Open';\n};\n\n// SLA expectations by request type (in days)\nconst getExpectedResolutionDays = requestType => {\n  const slaMap = {\n    'Abandoned Vehicle': 3,\n    'Graffiti': 7,\n    'Pothole': 3,\n    'Parking Enforcement': 1,\n    'Unauthorized Encampment': 5,\n    'Encampment': 5,\n    'Street Light': 5,\n    'Illegal Dumping': 7,\n    'Dumping': 7,\n    'Tree Maintenance': 14,\n    'Tree': 14,\n    'Traffic Signal': 2,\n    'Street Sign': 5,\n    'Sign': 5,\n    'Park Maintenance': 10,\n    'Park': 10,\n    'Sidewalk': 14,\n    'Water Main': 1,\n    'Sewer': 2,\n    'Noise Complaint': 2,\n    'General Inquiry': 3\n  };\n  if (!requestType) return 5;\n\n  // Exact match\n  if (slaMap[requestType]) return slaMap[requestType];\n\n  // Partial match\n  const requestTypeLower = requestType.toLowerCase();\n  for (const [key, value] of Object.entries(slaMap)) {\n    if (requestTypeLower.includes(key.toLowerCase())) {\n      return value;\n    }\n  }\n  return 5; // Default\n};\n\n// Generate realistic sample data (fallback)\nconst generateEnhancedSampleData = () => {\n  console.log('ðŸŽ¨ Generating sample data (last 12 months)...');\n  const departments = ['SPD-Seattle Police Department', 'SDOT-Seattle Department of Transportation', 'SPU-Seattle Public Utilities', 'Parks and Recreation', 'Human Services Department', 'SCL-Seattle City Light', 'FAS-Finance and Administrative Services'];\n  const requestTypes = [{\n    type: 'Abandoned Vehicle',\n    avgDays: 3,\n    targetDays: 3\n  }, {\n    type: 'Graffiti',\n    avgDays: 5,\n    targetDays: 7\n  }, {\n    type: 'Pothole',\n    avgDays: 2,\n    targetDays: 3\n  }, {\n    type: 'Parking Enforcement',\n    avgDays: 1,\n    targetDays: 1\n  }, {\n    type: 'Unauthorized Encampment',\n    avgDays: 8,\n    targetDays: 5\n  }, {\n    type: 'Street Light Out',\n    avgDays: 4,\n    targetDays: 5\n  }, {\n    type: 'Illegal Dumping / Needles',\n    avgDays: 6,\n    targetDays: 7\n  }, {\n    type: 'Tree Maintenance',\n    avgDays: 12,\n    targetDays: 14\n  }, {\n    type: 'Traffic Signal Malfunction',\n    avgDays: 1,\n    targetDays: 2\n  }, {\n    type: 'Sidewalk Repair',\n    avgDays: 15,\n    targetDays: 14\n  }, {\n    type: 'Water Main Break',\n    avgDays: 1,\n    targetDays: 1\n  }, {\n    type: 'General Inquiry - Police Department',\n    avgDays: 2,\n    targetDays: 3\n  }];\n  const neighborhoods = ['Capitol Hill', 'Ballard', 'Fremont', 'Queen Anne', 'University District', 'Greenwood', 'Wallingford', 'Ravenna', 'Green Lake', 'Northgate', 'Roosevelt', 'Stevens', 'Adams', 'Meadowbrook'];\n  const requests = [];\n  const tracking = [];\n  const today = new Date();\n  const currentYear = today.getFullYear();\n\n  // Generate 500 sample requests\n  for (let i = 0; i < 500; i++) {\n    var _closedDate;\n    const requestType = requestTypes[Math.floor(Math.random() * requestTypes.length)];\n    const department = departments[Math.floor(Math.random() * departments.length)];\n    const neighborhood = neighborhoods[Math.floor(Math.random() * neighborhoods.length)];\n\n    // Create dates within last 365 days\n    const daysAgo = Math.floor(Math.random() * 365);\n    const createdDate = new Date(today);\n    createdDate.setDate(createdDate.getDate() - daysAgo);\n    const daysOpen = Math.floor(Math.random() * 30);\n    const willClose = Math.random() > 0.3;\n    let closedDate = null;\n    if (willClose) {\n      closedDate = new Date(createdDate.getTime() + daysOpen * 24 * 60 * 60 * 1000);\n      if (closedDate > today) closedDate = null;\n    }\n    const status = closedDate ? 'Closed' : Math.random() > 0.4 ? 'In Progress' : 'Open';\n    const yearPrefix = createdDate.getFullYear().toString().substr(2);\n    const request = {\n      service_request_number: `${yearPrefix}-${String(10000 + i).padStart(6, '0')}`,\n      service_request_type: requestType.type,\n      city_department: department,\n      status: status,\n      created_date: createdDate.toISOString(),\n      closed_date: (_closedDate = closedDate) === null || _closedDate === void 0 ? void 0 : _closedDate.toISOString(),\n      expected_resolution_days: requestType.targetDays,\n      actual_resolution_days: closedDate ? daysOpen : null,\n      sla_met: closedDate ? daysOpen <= requestType.targetDays : null,\n      location: `${neighborhood}, Seattle, WA`,\n      neighborhood: neighborhood,\n      council_district: `${Math.floor(Math.random() * 7 + 1)}`,\n      latitude: 47.6062 + (Math.random() - 0.5) * 0.1,\n      longitude: -122.3321 + (Math.random() - 0.5) * 0.1,\n      zip_code: `981${Math.floor(Math.random() * 30 + 1).toString().padStart(2, '0')}`,\n      method_received: ['Find It Fix It Apps', 'Citizen Web', 'Phone'][Math.floor(Math.random() * 3)]\n    };\n    requests.push(request);\n\n    // Generate tracking updates\n    const statusUpdates = [{\n      status: 'Request Received',\n      days: 0\n    }, {\n      status: 'Routed to Department',\n      days: 0.5\n    }, {\n      status: 'Assigned to Staff',\n      days: 1\n    }, {\n      status: 'Work Scheduled',\n      days: 3\n    }];\n    if (status === 'Closed') {\n      statusUpdates.push({\n        status: 'Work Complete',\n        days: Math.max(0, daysOpen - 1)\n      });\n      statusUpdates.push({\n        status: 'Verified',\n        days: daysOpen\n      });\n    }\n    const numUpdates = status === 'Closed' ? statusUpdates.length : Math.min(3, statusUpdates.length);\n    for (let j = 0; j < numUpdates; j++) {\n      const update = statusUpdates[j];\n      const updateDate = new Date(createdDate.getTime() + update.days * 24 * 60 * 60 * 1000);\n      if (updateDate <= today) {\n        tracking.push({\n          service_request_number: request.service_request_number,\n          status: update.status,\n          updated_at: updateDate.toISOString(),\n          department: department\n        });\n      }\n    }\n  }\n  console.log(`âœ… Generated ${requests.length} sample requests`);\n  return {\n    requests,\n    tracking,\n    dataSource: 'Sample Data (Demo)',\n    timestamp: new Date().toISOString()\n  };\n};\nexport { generateEnhancedSampleData };","map":{"version":3,"names":["API_CONFIG","BASE_URL","ENDPOINTS","CUSTOMER_SERVICE_REQUESTS","REQUEST_TRACKING","LIMITS","REQUESTS","TRACKING","FIELD_MAPPING","serviceRequestNumber","serviceRequestType","department","createdDate","methodReceived","status","location","xValue","yValue","latitude","longitude","latLong","zipCode","councilDistrict","policePrecinct","neighborhood","fetchSeattleData","console","log","currentYear","Date","getFullYear","threeYearsAgo","requestsUrl","trackingUrl","fetchWithTimeout","url","timeout","Promise","race","fetch","method","headers","_","reject","setTimeout","Error","requestsResponse","trackingResponse","all","catch","err","error","message","warn","requests","tracking","dataFetched","ok","rawRequests","json","length","Array","isArray","map","req","created_date","toISOString","normalizeStatus","requestType","service_request_type","closedDate","created","estimatedDays","getExpectedResolutionDays","getTime","service_request_number","Math","random","toString","substr","city_department","closed_date","method_received","council_district","zip_code","parseFloat","police_precinct","expected_resolution_days","actual_resolution_days","sla_met","closed","days","floor","e","sort","a","b","stats","total","open","filter","r","inProgress","departments","Set","requestTypes","newest","oldest","toLocaleDateString","parseError","rawTracking","track","servicerequestnumber","statusdescription","updated_at","updatedat","departmentname","_requests","_requests$","dataSource","datasetUrl","timestamp","totalRequests","totalTracking","dateRange","from","to","sampleData","generateEnhancedSampleData","statusLower","toLowerCase","includes","slaMap","requestTypeLower","key","value","Object","entries","type","avgDays","targetDays","neighborhoods","today","i","_closedDate","daysAgo","setDate","getDate","daysOpen","willClose","yearPrefix","request","String","padStart","push","statusUpdates","max","numUpdates","min","j","update","updateDate"],"sources":["/Users/richapadhariya/Documents/pact-athon-winner/src/services/dataService.js"],"sourcesContent":["// src/services/dataService.js\n// Optimized for Seattle Customer Service Requests API\n// Dataset: https://data.seattle.gov/City-Administration/Customer-Service-Requests/5ngg-rpne\n\nconst API_CONFIG = {\n  BASE_URL: 'https://data.seattle.gov/resource',\n  ENDPOINTS: {\n    CUSTOMER_SERVICE_REQUESTS: '5ngg-rpne.json',\n    REQUEST_TRACKING: '43nw-pkdq.json'\n  },\n  LIMITS: {\n    REQUESTS: 5000,  // Reasonable limit for performance\n    TRACKING: 2000\n  }\n};\n\n// Actual field names from Seattle Open Data Portal\nconst FIELD_MAPPING = {\n  // Service Request fields\n  serviceRequestNumber: 'servicerequestnumber',\n  serviceRequestType: 'webintakeservicerequests',\n  department: 'departmentname',\n  createdDate: 'createddate',\n  methodReceived: 'methodreceivedname',\n  status: 'servicerequeststatusname',\n  location: 'location',\n  xValue: 'x_value',\n  yValue: 'y_value',\n  latitude: 'latitude',\n  longitude: 'longitude',\n  latLong: 'latitude_longitude',\n  zipCode: 'zipcode',\n  councilDistrict: 'councildistrict',\n  policePrecinct: 'policeprecinct',\n  neighborhood: 'neighborhood'\n};\n\nexport const fetchSeattleData = async () => {\n  try {\n    console.log('ðŸ”„ Fetching data from Seattle Open Data Portal...');\n    console.log('ðŸ“Š Dataset: Customer Service Requests (5ngg-rpne)');\n    \n    // Build API URLs with filters for recent data\n    const currentYear = new Date().getFullYear();\n    const threeYearsAgo = currentYear - 3;\n    \n    const requestsUrl = `${API_CONFIG.BASE_URL}/${API_CONFIG.ENDPOINTS.CUSTOMER_SERVICE_REQUESTS}?$limit=${API_CONFIG.LIMITS.REQUESTS}&$where=createddate >= '${threeYearsAgo}-01-01T00:00:00.000'`;\n    const trackingUrl = `${API_CONFIG.BASE_URL}/${API_CONFIG.ENDPOINTS.REQUEST_TRACKING}?$limit=${API_CONFIG.LIMITS.TRACKING}`;\n    \n    console.log('ðŸ“¡ Fetching recent requests (last 3 years)...');\n    \n    const fetchWithTimeout = (url, timeout = 20000) => {\n      return Promise.race([\n        fetch(url, {\n          method: 'GET',\n          headers: { \n            'Accept': 'application/json',\n            'X-App-Token': '' // Optional: Add your app token for higher rate limits\n          }\n        }),\n        new Promise((_, reject) => \n          setTimeout(() => reject(new Error('Request timeout')), timeout)\n        )\n      ]);\n    };\n\n    const [requestsResponse, trackingResponse] = await Promise.all([\n      fetchWithTimeout(requestsUrl).catch(err => {\n        console.error('âŒ Error fetching requests:', err.message);\n        return null;\n      }),\n      fetchWithTimeout(trackingUrl).catch(err => {\n        console.warn('âš ï¸ Error fetching tracking:', err.message);\n        return null;\n      })\n    ]);\n\n    let requests = [];\n    let tracking = [];\n    let dataFetched = false;\n\n    // Process Customer Service Requests\n    if (requestsResponse && requestsResponse.ok) {\n      try {\n        const rawRequests = await requestsResponse.json();\n        console.log(`âœ… Fetched ${rawRequests.length} requests from Seattle API`);\n        \n        if (rawRequests && Array.isArray(rawRequests) && rawRequests.length > 0) {\n          \n          // Process and normalize the data\n          requests = rawRequests.map(req => {\n            const createdDate = req[FIELD_MAPPING.createdDate] || req.created_date || new Date().toISOString();\n            const status = normalizeStatus(req[FIELD_MAPPING.status] || req.status);\n            const requestType = req[FIELD_MAPPING.serviceRequestType] || req.service_request_type || 'Unknown';\n            \n            // Calculate closed date based on status\n            let closedDate = null;\n            if (status === 'Closed') {\n              // Estimate closed date (actual closed date might not be in dataset)\n              const created = new Date(createdDate);\n              const estimatedDays = getExpectedResolutionDays(requestType);\n              closedDate = new Date(created.getTime() + estimatedDays * 24 * 60 * 60 * 1000).toISOString();\n            }\n            \n            return {\n              service_request_number: req[FIELD_MAPPING.serviceRequestNumber] || req.service_request_number || `SR-${Math.random().toString(36).substr(2, 9)}`,\n              service_request_type: requestType,\n              city_department: req[FIELD_MAPPING.department] || req.city_department || 'Unknown Department',\n              status: status,\n              created_date: createdDate,\n              closed_date: closedDate,\n              method_received: req[FIELD_MAPPING.methodReceived] || 'Unknown',\n              location: req[FIELD_MAPPING.location] || 'Seattle, WA',\n              council_district: req[FIELD_MAPPING.councilDistrict] || 'Unknown',\n              neighborhood: req[FIELD_MAPPING.neighborhood] || 'Unknown',\n              zip_code: req[FIELD_MAPPING.zipCode] || null,\n              latitude: parseFloat(req[FIELD_MAPPING.latitude]) || null,\n              longitude: parseFloat(req[FIELD_MAPPING.longitude]) || null,\n              police_precinct: req[FIELD_MAPPING.policePrecinct] || null,\n              expected_resolution_days: getExpectedResolutionDays(requestType),\n              actual_resolution_days: null,\n              sla_met: null\n            };\n          });\n\n          // Calculate resolution times for closed requests\n          requests = requests.map(req => {\n            if (req.closed_date && req.created_date) {\n              try {\n                const created = new Date(req.created_date);\n                const closed = new Date(req.closed_date);\n                const days = Math.floor((closed - created) / (1000 * 60 * 60 * 24));\n                return {\n                  ...req,\n                  actual_resolution_days: days >= 0 ? days : null,\n                  sla_met: days >= 0 ? (days <= req.expected_resolution_days) : null\n                };\n              } catch (e) {\n                return req;\n              }\n            }\n            return req;\n          });\n\n          // Sort by created_date (most recent first)\n          requests.sort((a, b) => {\n            try {\n              return new Date(b.created_date) - new Date(a.created_date);\n            } catch {\n              return 0;\n            }\n          });\n\n          dataFetched = true;\n          console.log(`âœ… Processed ${requests.length} requests`);\n          \n          // Show statistics\n          const stats = {\n            total: requests.length,\n            open: requests.filter(r => r.status === 'Open').length,\n            inProgress: requests.filter(r => r.status === 'In Progress').length,\n            closed: requests.filter(r => r.status === 'Closed').length,\n            departments: [...new Set(requests.map(r => r.city_department))].length,\n            requestTypes: [...new Set(requests.map(r => r.service_request_type))].length\n          };\n          console.log('ðŸ“Š Dataset Statistics:', stats);\n          \n          // Show date range\n          if (requests.length > 0) {\n            try {\n              const newest = new Date(requests[0].created_date);\n              const oldest = new Date(requests[requests.length - 1].created_date);\n              console.log(`ðŸ“… Date range: ${oldest.toLocaleDateString()} to ${newest.toLocaleDateString()}`);\n            } catch (e) {\n              console.log('ðŸ“… Date range calculation skipped');\n            }\n          }\n        }\n      } catch (parseError) {\n        console.error('âŒ Error processing requests:', parseError);\n        console.error('Error details:', parseError.message);\n      }\n    }\n\n    // Process Request Tracking Data\n    if (trackingResponse && trackingResponse.ok) {\n      try {\n        const rawTracking = await trackingResponse.json();\n        \n        if (rawTracking && Array.isArray(rawTracking) && rawTracking.length > 0) {\n          console.log(`âœ… Fetched ${rawTracking.length} tracking records`);\n          \n          tracking = rawTracking.map(track => ({\n            service_request_number: track.service_request_number || track.servicerequestnumber || '',\n            status: track.status || track.statusdescription || 'In Progress',\n            updated_at: track.updated_at || track.updatedat || new Date().toISOString(),\n            department: track.department || track.departmentname || 'Unknown'\n          }));\n\n          tracking.sort((a, b) => {\n            try {\n              return new Date(b.updated_at) - new Date(a.updated_at);\n            } catch {\n              return 0;\n            }\n          });\n        }\n      } catch (parseError) {\n        console.warn('âš ï¸ Error parsing tracking data:', parseError.message);\n      }\n    }\n\n    // Return live data if successful\n    if (dataFetched && requests.length > 0) {\n      console.log(`âœ…âœ…âœ… SUCCESS! Returning ${requests.length} live records`);\n      return {\n        requests,\n        tracking,\n        error: null,\n        dataSource: 'Seattle Open Data Portal (Live)',\n        datasetUrl: 'https://data.seattle.gov/City-Administration/Customer-Service-Requests/5ngg-rpne',\n        timestamp: new Date().toISOString(),\n        stats: {\n          totalRequests: requests.length,\n          totalTracking: tracking.length,\n          dateRange: {\n            from: requests[requests.length - 1]?.created_date,\n            to: requests[0]?.created_date\n          }\n        }\n      };\n    }\n\n    throw new Error(`No data available. API returned ${requests.length} records.`);\n\n  } catch (err) {\n    console.warn('âš ï¸ API Error, using sample data:', err.message);\n    const sampleData = generateEnhancedSampleData();\n    return {\n      ...sampleData,\n      error: `API unavailable: ${err.message}`,\n      dataSource: 'Sample Data (Demo)',\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n\n// Normalize status values from the API\nconst normalizeStatus = (status) => {\n  if (!status) return 'Open';\n  \n  const statusLower = status.toLowerCase();\n  \n  if (statusLower.includes('closed') || statusLower.includes('complete') || statusLower.includes('resolved')) {\n    return 'Closed';\n  }\n  if (statusLower.includes('progress') || statusLower.includes('assigned') || statusLower.includes('routed')) {\n    return 'In Progress';\n  }\n  if (statusLower.includes('open') || statusLower.includes('reported') || statusLower.includes('received')) {\n    return 'Open';\n  }\n  \n  return 'Open';\n};\n\n// SLA expectations by request type (in days)\nconst getExpectedResolutionDays = (requestType) => {\n  const slaMap = {\n    'Abandoned Vehicle': 3,\n    'Graffiti': 7,\n    'Pothole': 3,\n    'Parking Enforcement': 1,\n    'Unauthorized Encampment': 5,\n    'Encampment': 5,\n    'Street Light': 5,\n    'Illegal Dumping': 7,\n    'Dumping': 7,\n    'Tree Maintenance': 14,\n    'Tree': 14,\n    'Traffic Signal': 2,\n    'Street Sign': 5,\n    'Sign': 5,\n    'Park Maintenance': 10,\n    'Park': 10,\n    'Sidewalk': 14,\n    'Water Main': 1,\n    'Sewer': 2,\n    'Noise Complaint': 2,\n    'General Inquiry': 3\n  };\n\n  if (!requestType) return 5;\n  \n  // Exact match\n  if (slaMap[requestType]) return slaMap[requestType];\n\n  // Partial match\n  const requestTypeLower = requestType.toLowerCase();\n  for (const [key, value] of Object.entries(slaMap)) {\n    if (requestTypeLower.includes(key.toLowerCase())) {\n      return value;\n    }\n  }\n  \n  return 5; // Default\n};\n\n// Generate realistic sample data (fallback)\nconst generateEnhancedSampleData = () => {\n  console.log('ðŸŽ¨ Generating sample data (last 12 months)...');\n  \n  const departments = [\n    'SPD-Seattle Police Department',\n    'SDOT-Seattle Department of Transportation',\n    'SPU-Seattle Public Utilities',\n    'Parks and Recreation',\n    'Human Services Department',\n    'SCL-Seattle City Light',\n    'FAS-Finance and Administrative Services'\n  ];\n\n  const requestTypes = [\n    { type: 'Abandoned Vehicle', avgDays: 3, targetDays: 3 },\n    { type: 'Graffiti', avgDays: 5, targetDays: 7 },\n    { type: 'Pothole', avgDays: 2, targetDays: 3 },\n    { type: 'Parking Enforcement', avgDays: 1, targetDays: 1 },\n    { type: 'Unauthorized Encampment', avgDays: 8, targetDays: 5 },\n    { type: 'Street Light Out', avgDays: 4, targetDays: 5 },\n    { type: 'Illegal Dumping / Needles', avgDays: 6, targetDays: 7 },\n    { type: 'Tree Maintenance', avgDays: 12, targetDays: 14 },\n    { type: 'Traffic Signal Malfunction', avgDays: 1, targetDays: 2 },\n    { type: 'Sidewalk Repair', avgDays: 15, targetDays: 14 },\n    { type: 'Water Main Break', avgDays: 1, targetDays: 1 },\n    { type: 'General Inquiry - Police Department', avgDays: 2, targetDays: 3 }\n  ];\n\n  const neighborhoods = [\n    'Capitol Hill', 'Ballard', 'Fremont', 'Queen Anne', 'University District',\n    'Greenwood', 'Wallingford', 'Ravenna', 'Green Lake', 'Northgate',\n    'Roosevelt', 'Stevens', 'Adams', 'Meadowbrook'\n  ];\n\n  const requests = [];\n  const tracking = [];\n  const today = new Date();\n  const currentYear = today.getFullYear();\n  \n  // Generate 500 sample requests\n  for (let i = 0; i < 500; i++) {\n    const requestType = requestTypes[Math.floor(Math.random() * requestTypes.length)];\n    const department = departments[Math.floor(Math.random() * departments.length)];\n    const neighborhood = neighborhoods[Math.floor(Math.random() * neighborhoods.length)];\n    \n    // Create dates within last 365 days\n    const daysAgo = Math.floor(Math.random() * 365);\n    const createdDate = new Date(today);\n    createdDate.setDate(createdDate.getDate() - daysAgo);\n    \n    const daysOpen = Math.floor(Math.random() * 30);\n    const willClose = Math.random() > 0.3;\n    let closedDate = null;\n    \n    if (willClose) {\n      closedDate = new Date(createdDate.getTime() + daysOpen * 24 * 60 * 60 * 1000);\n      if (closedDate > today) closedDate = null;\n    }\n    \n    const status = closedDate ? 'Closed' : (Math.random() > 0.4 ? 'In Progress' : 'Open');\n    const yearPrefix = createdDate.getFullYear().toString().substr(2);\n    \n    const request = {\n      service_request_number: `${yearPrefix}-${String(10000 + i).padStart(6, '0')}`,\n      service_request_type: requestType.type,\n      city_department: department,\n      status: status,\n      created_date: createdDate.toISOString(),\n      closed_date: closedDate?.toISOString(),\n      expected_resolution_days: requestType.targetDays,\n      actual_resolution_days: closedDate ? daysOpen : null,\n      sla_met: closedDate ? (daysOpen <= requestType.targetDays) : null,\n      location: `${neighborhood}, Seattle, WA`,\n      neighborhood: neighborhood,\n      council_district: `${Math.floor(Math.random() * 7 + 1)}`,\n      latitude: 47.6062 + (Math.random() - 0.5) * 0.1,\n      longitude: -122.3321 + (Math.random() - 0.5) * 0.1,\n      zip_code: `981${Math.floor(Math.random() * 30 + 1).toString().padStart(2, '0')}`,\n      method_received: ['Find It Fix It Apps', 'Citizen Web', 'Phone'][Math.floor(Math.random() * 3)]\n    };\n    \n    requests.push(request);\n\n    // Generate tracking updates\n    const statusUpdates = [\n      { status: 'Request Received', days: 0 },\n      { status: 'Routed to Department', days: 0.5 },\n      { status: 'Assigned to Staff', days: 1 },\n      { status: 'Work Scheduled', days: 3 }\n    ];\n\n    if (status === 'Closed') {\n      statusUpdates.push({ status: 'Work Complete', days: Math.max(0, daysOpen - 1) });\n      statusUpdates.push({ status: 'Verified', days: daysOpen });\n    }\n\n    const numUpdates = status === 'Closed' ? statusUpdates.length : Math.min(3, statusUpdates.length);\n\n    for (let j = 0; j < numUpdates; j++) {\n      const update = statusUpdates[j];\n      const updateDate = new Date(createdDate.getTime() + update.days * 24 * 60 * 60 * 1000);\n      \n      if (updateDate <= today) {\n        tracking.push({\n          service_request_number: request.service_request_number,\n          status: update.status,\n          updated_at: updateDate.toISOString(),\n          department: department\n        });\n      }\n    }\n  }\n\n  console.log(`âœ… Generated ${requests.length} sample requests`);\n\n  return { \n    requests, \n    tracking,\n    dataSource: 'Sample Data (Demo)',\n    timestamp: new Date().toISOString()\n  };\n};\n\nexport { generateEnhancedSampleData };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}