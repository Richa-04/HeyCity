{"ast":null,"code":"export const generateChatbotResponse = (input, requestData, trackingData, slaMetrics, insights) => {\n  const lowerInput = input.toLowerCase();\n\n  // Track request\n  if (lowerInput.includes('track') || lowerInput.includes('status') || /\\d{2}-\\d{5}/.test(input)) {\n    var _input$match;\n    const requestNum = (_input$match = input.match(/\\d{2}-\\d{5}/)) === null || _input$match === void 0 ? void 0 : _input$match[0];\n    if (requestNum) {\n      const request = requestData.find(r => r.service_request_number === requestNum);\n      if (request) {\n        const tracking = trackingData.filter(t => t.service_request_number === requestNum);\n        return `ðŸ“‹ Request ${requestNum}:\\n\\nâ€¢ Type: ${request.service_request_type}\\nâ€¢ Status: ${request.status}\\nâ€¢ Created: ${new Date(request.created_date).toLocaleDateString()}\\nâ€¢ Department: ${request.city_department}\\nâ€¢ Expected Resolution: ${request.expected_resolution_days} days\\n\\nTracking History:\\n${tracking.map(t => `âœ“ ${t.status} - ${new Date(t.updated_at).toLocaleDateString()}`).join('\\n') || 'No tracking updates available'}`;\n      }\n      return `I couldn't find request ${requestNum}. Please verify the number and try again.`;\n    }\n    return 'Please provide a request number (format: 25-XXXXX) to track.';\n  }\n\n  // Statistics\n  if (lowerInput.includes('how many') || lowerInput.includes('statistics') || lowerInput.includes('total')) {\n    const total = requestData.length;\n    const open = requestData.filter(r => r.status === 'Open').length;\n    const closed = requestData.filter(r => r.status === 'Closed').length;\n    return `ðŸ“Š Current Statistics:\\n\\nâ€¢ Total Requests: ${total}\\nâ€¢ Open: ${open}\\nâ€¢ Closed: ${closed}\\nâ€¢ In Progress: ${total - open - closed}\\nâ€¢ Average Resolution: ${(Object.values(slaMetrics.byType || {}).reduce((sum, m) => sum + parseFloat(m.avgResolutionDays || 0), 0) / Math.max(Object.keys(slaMetrics.byType || {}).length, 1)).toFixed(1)} days`;\n  }\n\n  // SLA information\n  if (lowerInput.includes('sla') || lowerInput.includes('expectation') || lowerInput.includes('how long')) {\n    const topTypes = Object.entries(slaMetrics.byType || {}).slice(0, 5);\n    return `â±ï¸ Expected Resolution Times:\\n\\n${topTypes.map(([type, data]) => `â€¢ ${type}: ${data.expectedDays} days (Current avg: ${data.avgResolutionDays} days)`).join('\\n')}\\n\\nOverall SLA Compliance: ${(Object.values(slaMetrics.byType || {}).reduce((sum, m) => sum + parseFloat(m.slaComplianceRate || 0), 0) / Math.max(Object.keys(slaMetrics.byType || {}).length, 1)).toFixed(0)}%`;\n  }\n\n  // Bottlenecks\n  if (lowerInput.includes('bottleneck') || lowerInput.includes('slow') || lowerInput.includes('problem')) {\n    const slowest = Object.entries(slaMetrics.byType || {}).sort((a, b) => parseFloat(b[1].avgResolutionDays) - parseFloat(a[1].avgResolutionDays)).slice(0, 3);\n    return `âš ï¸ Current Bottlenecks:\\n\\n${slowest.map(([type, data], i) => `${i + 1}. ${type}\\n   Taking ${data.avgResolutionDays} days (target: ${data.expectedDays} days)\\n   ${data.total} total requests`).join('\\n\\n')}`;\n  }\n\n  // Insights\n  if (lowerInput.includes('insight') || lowerInput.includes('recommendation') || lowerInput.includes('suggest')) {\n    if (insights.length > 0) {\n      return `ðŸ’¡ Key Insights:\\n\\n${insights.slice(0, 3).map((insight, i) => `${i + 1}. ${insight.title}\\n   ${insight.description}`).join('\\n\\n')}`;\n    }\n    return 'No specific insights available at the moment.';\n  }\n\n  // Default response\n  return `I can help you with:\\n\\nâ€¢ Track requests (provide request #)\\nâ€¢ View statistics (\"how many requests\")\\nâ€¢ Check SLA expectations (\"how long\")\\nâ€¢ Identify bottlenecks (\"what's slow\")\\nâ€¢ Get insights (\"show insights\")\\n\\nWhat would you like to know?`;\n};\nexport const initializeChatbot = () => {\n  return [{\n    role: 'assistant',\n    content: 'Hello! I\\'m your Seattle Customer Service AI Assistant. I can help you with:\\n\\nâ€¢ Track a service request\\nâ€¢ Find request statistics\\nâ€¢ Get SLA information\\nâ€¢ Identify bottlenecks\\nâ€¢ Provide insights\\n\\nHow can I assist you today?',\n    timestamp: new Date()\n  }];\n};","map":{"version":3,"names":["generateChatbotResponse","input","requestData","trackingData","slaMetrics","insights","lowerInput","toLowerCase","includes","test","_input$match","requestNum","match","request","find","r","service_request_number","tracking","filter","t","service_request_type","status","Date","created_date","toLocaleDateString","city_department","expected_resolution_days","map","updated_at","join","total","length","open","closed","Object","values","byType","reduce","sum","m","parseFloat","avgResolutionDays","Math","max","keys","toFixed","topTypes","entries","slice","type","data","expectedDays","slaComplianceRate","slowest","sort","a","b","i","insight","title","description","initializeChatbot","role","content","timestamp"],"sources":["/Users/richapadhariya/Documents/pact-athon-winner/src/services/chatbotEngine.js"],"sourcesContent":["export const generateChatbotResponse = (input, requestData, trackingData, slaMetrics, insights) => {\n  const lowerInput = input.toLowerCase();\n\n  // Track request\n  if (lowerInput.includes('track') || lowerInput.includes('status') || /\\d{2}-\\d{5}/.test(input)) {\n    const requestNum = input.match(/\\d{2}-\\d{5}/)?.[0];\n    if (requestNum) {\n      const request = requestData.find(r => r.service_request_number === requestNum);\n      if (request) {\n        const tracking = trackingData.filter(t => t.service_request_number === requestNum);\n        return `ðŸ“‹ Request ${requestNum}:\\n\\nâ€¢ Type: ${request.service_request_type}\\nâ€¢ Status: ${request.status}\\nâ€¢ Created: ${new Date(request.created_date).toLocaleDateString()}\\nâ€¢ Department: ${request.city_department}\\nâ€¢ Expected Resolution: ${request.expected_resolution_days} days\\n\\nTracking History:\\n${tracking.map(t => `âœ“ ${t.status} - ${new Date(t.updated_at).toLocaleDateString()}`).join('\\n') || 'No tracking updates available'}`;\n      }\n      return `I couldn't find request ${requestNum}. Please verify the number and try again.`;\n    }\n    return 'Please provide a request number (format: 25-XXXXX) to track.';\n  }\n\n  // Statistics\n  if (lowerInput.includes('how many') || lowerInput.includes('statistics') || lowerInput.includes('total')) {\n    const total = requestData.length;\n    const open = requestData.filter(r => r.status === 'Open').length;\n    const closed = requestData.filter(r => r.status === 'Closed').length;\n    return `ðŸ“Š Current Statistics:\\n\\nâ€¢ Total Requests: ${total}\\nâ€¢ Open: ${open}\\nâ€¢ Closed: ${closed}\\nâ€¢ In Progress: ${total - open - closed}\\nâ€¢ Average Resolution: ${(Object.values(slaMetrics.byType || {}).reduce((sum, m) => sum + parseFloat(m.avgResolutionDays || 0), 0) / Math.max(Object.keys(slaMetrics.byType || {}).length, 1)).toFixed(1)} days`;\n  }\n\n  // SLA information\n  if (lowerInput.includes('sla') || lowerInput.includes('expectation') || lowerInput.includes('how long')) {\n    const topTypes = Object.entries(slaMetrics.byType || {}).slice(0, 5);\n    return `â±ï¸ Expected Resolution Times:\\n\\n${topTypes.map(([type, data]) => `â€¢ ${type}: ${data.expectedDays} days (Current avg: ${data.avgResolutionDays} days)`).join('\\n')}\\n\\nOverall SLA Compliance: ${(Object.values(slaMetrics.byType || {}).reduce((sum, m) => sum + parseFloat(m.slaComplianceRate || 0), 0) / Math.max(Object.keys(slaMetrics.byType || {}).length, 1)).toFixed(0)}%`;\n  }\n\n  // Bottlenecks\n  if (lowerInput.includes('bottleneck') || lowerInput.includes('slow') || lowerInput.includes('problem')) {\n    const slowest = Object.entries(slaMetrics.byType || {})\n      .sort((a, b) => parseFloat(b[1].avgResolutionDays) - parseFloat(a[1].avgResolutionDays))\n      .slice(0, 3);\n    return `âš ï¸ Current Bottlenecks:\\n\\n${slowest.map(([type, data], i) => `${i + 1}. ${type}\\n   Taking ${data.avgResolutionDays} days (target: ${data.expectedDays} days)\\n   ${data.total} total requests`).join('\\n\\n')}`;\n  }\n\n  // Insights\n  if (lowerInput.includes('insight') || lowerInput.includes('recommendation') || lowerInput.includes('suggest')) {\n    if (insights.length > 0) {\n      return `ðŸ’¡ Key Insights:\\n\\n${insights.slice(0, 3).map((insight, i) => `${i + 1}. ${insight.title}\\n   ${insight.description}`).join('\\n\\n')}`;\n    }\n    return 'No specific insights available at the moment.';\n  }\n\n  // Default response\n  return `I can help you with:\\n\\nâ€¢ Track requests (provide request #)\\nâ€¢ View statistics (\"how many requests\")\\nâ€¢ Check SLA expectations (\"how long\")\\nâ€¢ Identify bottlenecks (\"what's slow\")\\nâ€¢ Get insights (\"show insights\")\\n\\nWhat would you like to know?`;\n};\n\nexport const initializeChatbot = () => {\n  return [{\n    role: 'assistant',\n    content: 'Hello! I\\'m your Seattle Customer Service AI Assistant. I can help you with:\\n\\nâ€¢ Track a service request\\nâ€¢ Find request statistics\\nâ€¢ Get SLA information\\nâ€¢ Identify bottlenecks\\nâ€¢ Provide insights\\n\\nHow can I assist you today?',\n    timestamp: new Date()\n  }];\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}